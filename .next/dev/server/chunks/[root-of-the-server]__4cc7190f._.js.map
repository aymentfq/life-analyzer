{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anass/life-analyzer/app/api/gemini/route.ts"],"sourcesContent":["import { GoogleGenerativeAI } from \"@google/generative-ai\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const apiKey = process.env.GEMINI_API_KEY || process.env.NEXT_PUBLIC_GEMINI_API_KEY;\r\n    if (!apiKey) return NextResponse.json({ error: \"API Key Missing\" }, { status: 500 });\r\n\r\n    const { prompt } = await req.json();\r\n    const genAI = new GoogleGenerativeAI(apiKey);\r\n    const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash\" });\r\n\r\n    const finalPrompt = `Analyze this daily log: \"${prompt}\". \r\n    Return a STRICT JSON in English:\r\n    {\r\n      \"summary\": \"Deep 2-sentence behavioral insight.\",\r\n      \"correlations\": [\"Activity X influenced Metric Y\", \"Pattern Z detected\"],\r\n      \"scores\": {\"focus\": 10-100, \"productivity\": 10-100, \"mood\": 10-100, \"energy\": 10-100, \"discipline\": 10-100},\r\n      \"allocation\": {\"work\": 0-100, \"leisure\": 0-100, \"health\": 0-100, \"waste\": 0-100},\r\n      \"advice_protocol\": {\"immediate\": \"Short tactical command\", \"longterm\": \"Detailed weekly strategy\"}\r\n    }\r\n    LOGIC: Avoid scores below 10% if activity is present.`;\r\n\r\n    const result = await model.generateContent(finalPrompt);\r\n    const text = result.response.text().replace(/```json|```/g, \"\").trim();\r\n    return NextResponse.json(JSON.parse(text));\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc,IAAI,QAAQ,GAAG,CAAC,0BAA0B;QACnF,IAAI,CAAC,QAAQ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;QAElF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,IAAI;QACjC,MAAM,QAAQ,IAAI,sLAAkB,CAAC;QACrC,MAAM,QAAQ,MAAM,kBAAkB,CAAC;YAAE,OAAO;QAAmB;QAEnE,MAAM,cAAc,CAAC,yBAAyB,EAAE,OAAO;;;;;;;;;yDASF,CAAC;QAEtD,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,OAAO,OAAO,QAAQ,CAAC,IAAI,GAAG,OAAO,CAAC,gBAAgB,IAAI,IAAI;QACpE,OAAO,gJAAY,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC;IACtC,EAAE,OAAO,OAAY;QACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF"}}]
}